# TIL (Today I Learned) – Generic / Interface / Delegate & Event

**날짜: 2025.12.24 수요일**

## 제네릭(Generic)
- 제네릭은 다양한 자료형을 하나의 구조로 다루기 위한 문법입니다.
- 동일한 구조의 클래스를 타입별로 여러 개 만들 필요 없이 재사용할 수 있습니다.
- 컴파일 단계에서 타입이 확정되므로 형식 안정성이 보장되며, 박싱/언박싱을 방지하여 성능이 향상됩니다.

### 박싱 / 언박싱
- `박싱(Boxing)`은 값 타입을 object 참조 타입으로 감싸 `힙 메모리`에 올리는 과정이다.
- `언박싱(Unboxing)`은 object 안에 들어 있는 값을 다시 값 타입으로 꺼내는 과정이다.
- 박싱과 언박싱은 `힙 할당과 복사 비용이 발생`하므로 `성능 저하의 원인`이 된다.
```csharp
int a = 10;
object b = a;   // Boxing
int c = (int)b; // Unboxing
```

#### **제네릭 사용 예시**
```csharp
public class Container<T>
{
    private T[] _arr = new T[10];

    public void Add(T value)
    {
        for (int i = 0; i < _arr.Length; i++)
        {
            if (_arr[i] == null)
            {
                _arr[i] = value;
                return;
            }
        }
    }

    public T Get(int index)
    {
        return _arr[index];
    }
}
```

## 인터페이스(Interface)
- 인터페이스는 클래스가 `반드시 구현해야 할 기능`을 정의하는 약속이다.
- `다중 구현`이 가능하여 기능 단위로 설계를 분리할 수 있다.
```csharp
public interface IInteractable
{
    void Interact();
}

public class Npc : IInteractable
{
    public void Interact()
    {
        Console.WriteLine("NPC와 대화합니다.");
    }
}
```

## 델리게이트와 이벤트
- 델리게이트는 `메서드를 참조`하는 타입이다.
- 이벤트는 델리게이트를 기반으로 `객체 간의 상태 변화`를 `전달`하는 구조이다.
```csharp
public class Player
{
    public delegate void HealthDelegate(int hp);
    public event HealthDelegate OnHealthChanged;

    private int _health = 100;
    public int Health
    {
        get { return _health; }
        set
        {
            _health = value;
            OnHealthChanged?.Invoke(_health);
        }
    }
}
```
```csharp
public class GameUI
{
    public GameUI(Player player)
    {
        player.OnHealthChanged += PrintHealth;
    }

    public void PrintHealth(int hp)
    {
        Console.WriteLine($"현재 체력 : {hp}");
    }
}
```

### 람다식
- `람다식`은 익명 함수를 `간결`하게 표현하는 문법이다.
```csharp
player.OnHealthChanged += hp => Console.WriteLine($"람다 체력 : {hp}");
```

## 오늘의 핵심 정리
- 제네릭은 타입 `안정성과 성능`을 동시에 잡는 구조이다.
- 인터페이스는 `클래스의 역할`을 강제하는 `약속`이다.
- 델리게이트와 이벤트는 객체 간 `느슨한 통신 구조`를 만든다.
- 박싱/언박싱은 `성능 저하의 원인`이므로 `제네릭 사용`이 권장된다.